# 坚持有你 - 健康管理小程序产品需求文档

## 📋 项目概述

### 应用定位

- **应用名称**: 坚持有你
- **应用类型**: 健康管理类微信小程序
- **核心主题**: 坚持习惯培养，专注减肥和健康管理
- **目标用户**: 情侣用户（您和您的爱人）
- **核心价值**: 通过168间歇性断食和习惯养成，实现健康减肥目标

### 应用特色

- 🤝 **情侣互动** - 双人同步，互相监督鼓励
- ⏰ **168断食** - 科学的间歇性断食计划
- 📊 **数据可视化** - 直观的进度图表和趋势分析
- 🏆 **成就系统** - 里程碑奖励，增强坚持动力
- 💕 **温馨提醒** - 个性化的关爱提醒功能

---

## 🎯 核心功能模块

### 1. 用户系统模块

#### 1.1 用户注册/登录

- **功能描述**: 微信授权登录，创建个人档案
- **核心功能**:
  - 微信一键登录
  - 个人信息完善（昵称、头像、身高、目标体重）
  - 情侣绑定功能（通过邀请码）

#### 1.2 个人档案管理

- **功能描述**: 用户基础信息和目标设定
- **核心功能**:
  - 基础信息：身高、年龄、性别
  - 目标设定：目标体重、目标减重
  - 头像和昵称修改
  - 偏好设置：提醒时间、单位制式

---

### 2. 168断食管理模块

#### 2.1 断食计划设定

- **功能描述**: 个性化的168断食计划制定
- **核心功能**:
  - 168标准计划（16小时禁食，8小时进食）
  - 自定义断食时间窗口
  - 进食时间段设置（如：10:00-18:00）
  - 计划开始日期设定

#### 2.2 断食计时器

- **功能描述**: 实时的断食状态追踪
- **核心功能**:
  - 当前状态显示（禁食中/进食窗口）
  - 倒计时显示（距离下个阶段剩余时间）
  - 进度环形图展示
  - 手动开始/结束功能
  - 紧急中断选项（记录原因）

#### 2.3 断食历史记录

- **功能描述**: 断食执行情况的历史追踪
- **核心功能**:
  - 每日断食完成状态
  - 断食时长统计
  - 月度断食成功率
  - 连续断食天数记录
  - 失败原因分析

---

### 3. 体重管理模块

#### 3.1 体重记录

- **功能描述**: 日常体重数据记录和管理
- **核心功能**:
  - 每日体重录入（支持小数点）
  - 照片对比功能（可选）
  - 心情记录（开心/一般/沮丧）
  - 备注信息（如：生理期、生病等）
  - 历史记录查看和编辑

#### 3.2 体重趋势分析

- **功能描述**: 体重变化的可视化分析
- **核心功能**:
  - 体重变化曲线图（7天/30天/90天）
  - BMI指数计算和趋势
  - 减重进度百分比
  - 阶段性里程碑标记
  - 预期目标达成时间预测

---

### 4. 饮食记录模块

#### 4.1 进食时间记录

- **功能描述**: 进食窗口内的饮食记录
- **核心功能**:
  - 快速记录进餐时间
  - 餐次分类（早餐/午餐/晚餐/加餐）
  - 简单的食物分类记录
  - 饱腹感评分（1-5星）
  - 进食心情记录

#### 4.2 饮食分析

- **功能描述**: 饮食习惯的分析和建议
- **核心功能**:
  - 进食时间分布图
  - 常吃食物统计
  - 进食频率分析
  - 健康饮食建议

---

### 5. 成就系统模块

#### 5.1 成就徽章

- **功能描述**: 激励用户坚持的成就系统
- **成就类型**:
  - **坚持系列**: 连续3天、7天、21天、50天、100天
  - **体重系列**: 减重1kg、3kg、5kg、10kg
  - **断食系列**: 完成100次、500次、1000次断食
  - **情侣系列**: 共同坚持7天、30天、100天
  - **特殊成就**: 节日坚持、生日达成等

#### 5.2 里程碑记录

- **功能描述**: 重要时刻的记录和纪念
- **核心功能**:
  - 自动里程碑检测
  - 成就达成时间记录
  - 里程碑照片上传
  - 成就分享功能
  - 里程碑回顾相册

---

### 6. 情侣互动模块

#### 6.1 数据同步

- **功能描述**: 情侣间的数据共享和对比
- **核心功能**:
  - 实时状态同步（对方是否在断食中）
  - 体重变化对比图表
  - 坚持天数PK显示
  - 成就获得提醒
  - 月度数据总结

#### 6.2 互动鼓励

- **功能描述**: 情侣间的互相支持功能
- **核心功能**:
  - 快速鼓励按钮（加油、坚持、棒棒哒）
  - 自定义鼓励话语
  - 完成目标庆祝动画
  - 相互提醒功能
  - 情侣挑战任务

#### 6.3 共同目标

- **功能描述**: 设定和完成共同的健康目标
- **核心功能**:
  - 情侣联合目标设定
  - 共同完成度进度条
  - 团队成就解锁
  - 目标完成庆祝活动建议

---

### 7. 提醒通知模块

#### 7.1 智能提醒

- **功能描述**: 个性化的时间提醒系统
- **提醒类型**:
  - **断食提醒**: 进食窗口开始/结束
  - **体重提醒**: 每日称重提醒
  - **饮水提醒**: 禁食期间饮水提醒
  - **鼓励提醒**: 坚持激励话语
  - **情侣提醒**: 对方状态变化提醒

#### 7.2 提醒设置

- **功能描述**: 灵活的提醒偏好设置
- **核心功能**:
  - 提醒时间自定义
  - 提醒内容个性化
  - 勿扰时间设置
  - 提醒方式选择（震动/声音）
  - 情侣提醒开关

---

## 📱 页面结构设计

### 主要页面架构

```
├── 首页 (tabBar)
│   ├── 今日概览
│   ├── 断食状态显示
│   ├── 快速记录入口
│   └── 情侣状态展示
│
├── 断食计划 (tabBar)
│   ├── 计时器页面
│   ├── 计划设置
│   └── 历史记录
│
├── 体重管理 (tabBar)
│   ├── 体重记录
│   ├── 趋势图表
│   └── 目标进度
│
├── 我的 (tabBar)
│   ├── 个人档案
│   ├── 成就中心
│   ├── 设置中心
│   └── 情侣空间
│
└── 详情页面
    ├── 饮食记录详情
    ├── 成就详情
    ├── 数据分析详情
    └── 情侣互动详情
```

---

## 🎨 UI/UX 设计要求

### 设计风格

- **色彩方案**: 温馨的粉色系 + 清新的绿色系
- **设计风格**: 简约现代，温馨可爱
- **交互反馈**: 丰富的动画效果和手势反馈
- **情侣元素**: 爱心、情侣头像、甜蜜色彩

### 关键界面设计

1. **断食计时器**: 大号圆形进度条，清晰的时间显示
2. **体重曲线**: 平滑的曲线图，支持缩放查看
3. **成就页面**: 卡片式布局，解锁动画效果
4. **情侣对比**: 左右分屏显示，数据对比清晰

---

## 🛠️ 技术实现要点

### 数据存储

```typescript
// 本地存储结构
interface LocalStorage {
  userProfile: UserProfile;
  fastingPlans: FastingPlan[];
  weightRecords: WeightRecord[];
  achievements: Achievement[];
  settings: AppSettings;
}

// 云端数据同步
interface CloudData {
  userId: string;
  coupleId?: string;
  syncTimestamp: string;
  data: LocalStorage;
}
```

### 关键技术点

1. **定时器管理**: 精确的倒计时和状态切换
2. **数据可视化**: 使用 Charts 库绘制图表
3. **消息推送**: 微信小程序模板消息
4. **数据同步**: 云开发实时数据库
5. **图片处理**: 体重对比照片的处理和存储

---

## 📈 开发优先级

### Phase 1: 基础功能（1-2周）

- ✅ 用户登录和档案设置
- ✅ 168断食计时器
- ✅ 体重记录功能
- ✅ 基础UI框架搭建

### Phase 2: 核心功能（2-3周）

- ✅ 断食历史记录
- ✅ 体重趋势图表
- ✅ 基础成就系统
- ✅ 提醒通知功能

### Phase 3: 高级功能（2-3周）

- ✅ 情侣绑定和数据同步
- ✅ 饮食记录模块
- ✅ 完整成就系统
- ✅ 数据分析功能

### Phase 4: 优化完善（1-2周）

- ✅ 情侣互动功能
- ✅ UI/UX优化
- ✅ 性能优化
- ✅ 测试和调试

---

## 📊 数据模型设计

### 核心数据结构

```typescript
// 用户档案
interface UserProfile {
  id: string;
  wxOpenId: string;
  nickname: string;
  avatar: string;
  height: number; // 身高(cm)
  targetWeight: number; // 目标体重(kg)
  currentWeight: number; // 当前体重(kg)
  gender: 'male' | 'female';
  coupleId?: string; // 情侣ID
  createdAt: string;
  updatedAt: string;
}

// 断食计划
interface FastingPlan {
  id: string;
  userId: string;
  name: string; // 计划名称
  fastingHours: number; // 禁食小时数
  eatingHours: number; // 进食小时数
  startTime: string; // 进食开始时间 HH:mm
  endTime: string; // 进食结束时间 HH:mm
  isActive: boolean; // 是否当前活跃计划
  createdAt: string;
}

// 断食记录
interface FastingRecord {
  id: string;
  userId: string;
  planId: string;
  date: string; // YYYY-MM-DD
  startTime: string; // 开始时间 ISO
  endTime?: string; // 结束时间 ISO
  actualHours: number; // 实际断食小时数
  status: 'completed' | 'broken' | 'active';
  breakReason?: string; // 中断原因
  createdAt: string;
}

// 体重记录
interface WeightRecord {
  id: string;
  userId: string;
  weight: number; // 体重(kg)
  date: string; // YYYY-MM-DD
  mood: 'happy' | 'normal' | 'sad';
  note?: string; // 备注
  photo?: string; // 对比照片URL
  createdAt: string;
}

// 成就记录
interface Achievement {
  id: string;
  userId: string;
  type: 'fasting' | 'weight' | 'couple' | 'special';
  code: string; // 成就代码
  title: string; // 成就标题
  description: string; // 成就描述
  icon: string; // 成就图标
  unlockedAt: string; // 解锁时间
}
```

---

## 🎯 后续扩展功能

### 可选功能模块

1. **运动记录**: 配合断食的运动计划
2. **食谱推荐**: 健康的进食窗口食谱
3. **社区功能**: 用户经验分享（如果扩展用户群）
4. **专家建议**: AI智能建议和指导
5. **数据导出**: 健康报告生成和分享

### 技术优化方向

1. **离线支持**: 网络不佳时的功能保障
2. **数据备份**: 云端数据备份和恢复
3. **性能优化**: 大量数据的处理优化
4. **安全强化**: 数据加密和隐私保护

---

## 📝 开发注意事项

### uni-app 特殊考虑

1. **生命周期**: 使用 onLoad、onShow 而非 Vue 生命周期
2. **存储限制**: 微信小程序本地存储限制 10MB
3. **网络请求**: 需要在微信公众平台配置服务器域名
4. **消息推送**: 使用微信小程序模板消息功能
5. **分包加载**: 合理规划分包，主包控制在 2MB 以内

### 开发建议

1. **渐进开发**: 先实现基础功能，再逐步扩展
2. **数据先行**: 先设计好数据结构，再开发功能
3. **用户体验**: 注重交互反馈和动画效果
4. **错误处理**: 完善的错误处理和用户提示
5. **测试充分**: 多设备测试，确保兼容性

---

## 🚀 开始开发

### 建议的开发顺序

1. **搭建基础架构** - 页面路由、UI组件库
2. **实现用户系统** - 登录、档案设置
3. **开发断食功能** - 计时器、记录
4. **添加体重管理** - 记录、图表
5. **完善交互体验** - 动画、提醒
6. **开发情侣功能** - 数据同步、互动
7. **测试和优化** - 性能优化、bug修复

每个阶段完成后，建议先测试和优化，再进入下一阶段。这样可以确保每个功能都稳定可靠。

---

_文档版本: v1.0_  
_创建时间: 2024-12-19_  
_更新时间: 2024-12-19_
